function fecharModal(idOuEvento) {
    let modal;

    // Se o que foi passado for um evento de clique, use-o para encontrar o modal.
    if (idOuEvento && typeof idOuEvento === 'object' && idOuEvento.target) {
        modal = idOuEvento.target.closest('.modal');
    }
    // Caso contrário, assuma que é um ID (uma string) e encontre o modal por ele.
    else if (typeof idOuEvento === 'string') {
        modal = document.getElementById(idOuEvento);
    }

    if (modal) {
        modal.classList.remove("show");

        // Esta é a lógica que você já tinha para o chat, agora integrada
        if (modal.id === 'janelaChat') {
            if (chatListener) {
                chatListener();
                chatListener = null;
            }
            if (botInterval) {
                clearInterval(botInterval);
                botInterval = null;
            }
        }
    }
}
